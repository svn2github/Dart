# Copyright (c) 2013, the Dart project authors.  Please see the AUTHORS file
# for details. All rights reserved. Use of this source code is governed by a
# BSD-style license that can be found in the LICENSE file.

# WARNING:
# Tests using the multitest feature where failure is expected should *also* be
# listed in tests/lib/analyzer/analyze_tests.status without the "standalone"
# prefix.

package/invalid_uri_test: Fail, OK # Fails intentionally

[ $runtime == vm ]
# Fails because checked-in dart executable is not up to date.
io/test_runner_test: Fail
# Fails because checked-in dart executable is not up to date.
# Skip this because it is leaving temp directories behind when it fails.
io/skipping_dart2js_compilations_test: Skip

[ $runtime == vm ]
package/package_isolate_test: Fail # http://dartbug.com/7520.
# The test is flaky, and is timing out, causing buildbot cycle times to rise.
io/raw_server_socket_cancel_test: Skip # Issue 8675

[ $runtime == vm && $checked ]
# These tests have type errors on purpose.
io/process_invalid_arguments_test: Fail, OK
io/directory_invalid_arguments_test: Fail, OK
io/file_invalid_arguments_test: Fail, OK
io/socket_invalid_arguments_test: Fail, OK
io/stdout_bad_argument_test: Fail, OK
# These test have type errors on purpose and take very long to run in
# checked mode with no benefit. Skip.
io/file_fuzz_test: Skip
io/directory_fuzz_test: Skip

[ $runtime == vm && $system == macos ]
# This test fails with "Too many open files" on the Mac OS buildbot.
# This is expected as MacOS by default runs with a very low number
# of allowed open files ('ulimit -n' says something like 256).
io/socket_many_connections_test: Skip

# These tests pass on MacOS 10.8.2 but fails on the buildbot machines
# that are running an earlier version of MacOS. The issue is that the
# old version of MacOS does not expand the precomposed utf-8 it gets
# from the VM before comparing it to the decomposed utf-8 used for the
# file system.
io/file_non_ascii_sync_test: Pass, Fail
io/file_non_ascii_test: Pass, Fail
io/directory_non_ascii_sync_test: Pass, Fail
io/directory_non_ascii_test: Pass, Fail
io/process_non_ascii_test: Pass, Fail

[ $compiler == none && $runtime == drt ]
typed_data_isolate_test: Skip # This test uses dart:io
io/*: Skip # Don't run tests using dart:io in the browser
package/*: Skip # Do not run those in Dartium.
debugger/*: Skip # Do not run standalone debugger tests in browser.
coverage_test: Skip
http_launch_test: Skip

[ $compiler == dartc ]

# package test issue 7392
package/package1_test: Fail
package/package_test: Fail
io/test_runner_test: Fail # Library dart:uri removed.
io/skipping_dart2js_compilations_test: Skip # Library dart:uri removed.


# The dart:io library is created at build time from separate files, and
# there is no language-spec compatible way to run unit tests on the private
# members and methods of dart:io.
# Dartc spots the misuse of 'part' directives in these unit tests.
io/http_headers_test: Skip  # dartc cannot parse dart:io unit tests.
io/http_cookie_date_test: Skip  # dartc cannot parse dart:io unit tests.
io/url_encoding_test: Skip  # dartc cannot parse dart:io unit tests.
io/http_parser_test: Skip  # dartc cannot parse dart:io unit tests.
io/web_socket_protocol_processor_test: Skip  # dart:io unit test.

io/process_exit_negative_test: Fail  # This is a compilation-time negative test.


[ $compiler == dartanalyzer ]
io/file_constructor_test: fail
io/http_cookie_date_test: fail
io/http_headers_test: fail
io/http_parser_test: fail
io/process_exit_negative_test: fail
io/url_encoding_test: fail
io/web_socket_protocol_processor_test: fail
53bit_overflow_literal_test/01: fail, ok

# Fails because checked-in dart executable is not up to date.
io/test_runner_test: fail
io/skipping_dart2js_compilations_test: fail


[ $compiler == dart2analyzer ]
io/file_constructor_test: fail
io/http_cookie_date_test: fail
io/http_headers_test: fail
io/http_parser_test: fail
io/process_exit_negative_test: fail
io/url_encoding_test: fail
io/web_socket_protocol_processor_test: fail
53bit_overflow_literal_test/01: fail, ok

# Fails because checked-in dart executable is not up to date.
io/test_runner_test: fail
io/skipping_dart2js_compilations_test: fail


[ $compiler == dart2js ]
number_identity_test: Skip # Bigints and int/double diff. not supported.
typed_data_test: Skip # dart:typed_data support needed.
bytedata_test: Skip # dart:typed_data support needed.
typed_data_view_test: Skip # dart:typed_data support needed.
typed_data_isolate_test: Skip # dart:typed_data support needed.
typed_array_test: Skip # dart:typed_data support needed.
float_array_test: Skip # dart:typed_data support needed.
int_array_test: Skip  # dart:typed_data support needed.
byte_array_view_optimized_test: Skip # dart:typed_data support needed.
io/web_socket_protocol_processor_test: Skip  # Importing code with external keyword
io/url_encoding_test: Skip  # Importing code with external keyword
int_array_load_elimination_test: Skip  # This is a VM test
medium_integer_test: Fail, OK # Test fails with JS number semantics: issue 1533.
io/process_exit_negative_test: Fail, OK # relies on a static error that is a warning now.
package/package_isolate_test: Skip # spawnUri does not work in dart2js. See issue 3051
debugger/*: Skip # Do not run standalone vm debugger tests with dart2js.
left_shift_bit_and_op_test: Skip # Integers exceed dart2js precision.
pow_test: Skip # Precision > 53 bits.
io/test_runner_test: Fail # Library dart:uri removed.
io/skipping_dart2js_compilations_test: Skip # Library dart:uri removed.
http_launch_test: Skip
53bit_overflow_test: Skip
53bit_overflow_literal_test: Skip

[ $compiler == dart2js && $jscl ]
assert_test: Fail, OK # Assumes unspecified fields on the AssertionError.
byte_array_test: Fail, OK # ByteArray
deoptimization_test: Fail, OK # Requires bigint.
out_of_memory_test: Fail, OK # d8 handles much larger arrays than Dart VM.
io/options_test: Fail, OK # Cannot pass options to d8.

[ $compiler == dart2js && $runtime == none ]
io/options_test: Fail
medium_integer_test: Pass # The test only fails at runtime, not at compilation.

[ $compiler == dart2js && $browser ]
*: Skip

[ $compiler == dart2js && $checked ]
io/http_read_test: Skip # Timeout TODO(ngeoffray): investigate
io/list_input_stream_test: Skip # Timeout TODO(ngeoffray): investigate

[ $compiler == dart2dart ]
# Skip until we stabilize language tests.
*: Skip

[ $arch == simarm ]
io/file_system_links_test: Crash # Issue: 11207
io/process_exit_negative_test: Pass, Crash # Issue: 11207
io/socket_many_connections_test: Pass, Crash # Issue: 11207
out_of_memory_test: Pass, Crash # Issue: 11207 (Pass on Mac)

[ $arch == arm ]
io/process_shell_test: Crash # Issue: 11207
io/raw_secure_server_socket_argument_test: Crash # Issue: 11207
io/secure_socket_argument_test: Crash # Issue: 11207

[ $arch == arm || $arch == simarm ]
constant_left_shift_test: Fail # Issue: 11207
coverage_test: Crash # Issue: 11207
debugger/basic_debugger_test: Crash # Issue: 11207
debugger/closure_debugger_test: Crash # Issue: 11207
deoptimization_test: Crash # Issue: 11207
float_array_test: Crash # Issue: 11207
http_launch_test: Crash # Issue: 11207
io/dart_std_io_pipe_test: Fail, Crash # Issue: 11207
io/delete_symlink_test: Crash # Issue: 11207
io/directory_test: Crash, Timeout # Issue: 11207
io/echo_server_stream_test: Crash # Issue: 11207
io/file_error_test: Pass, Crash # Issue: 11207
io/file_fuzz_test: Crash # Issue: 11207
io/file_input_stream_test: Pass, Crash # Issue: 11207
io/file_non_ascii_test: Pass, Crash # Issue: 11207
io/file_output_stream_test: Pass, Crash # Issue 11207
io/file_read_special_device_test: Crash, Fail, Timeout # Issue: 11207
io/file_stat_test: Crash # Issue: 11207
io/file_system_async_links_test: Crash # Issue: 11207
io/file_system_delete_test: Pass, Crash # Issue: 11207
io/file_system_links_test: Timeout, Pass, Crash # Issue: 11207
io/file_test: Timeout, Crash # Issue: 11207
io/file_write_as_test: Crash # Issue: 11207
io/http_10_test: Crash # Issue: 11207
io/http_advanced_test: Crash # Issue: 11207
io/http_auth_digest_test: Crash # Issue: 11207
io/http_auth_test: Crash # Issue: 11207
io/http_basic_test: Crash # Issue: 11207
io/http_body_test: Crash # Issue: 11207
io/http_client_connect_test: Crash # Issue: 11207
io/http_client_exception_test: Pass, Crash # Issue: 11207
io/http_client_request_test: Crash # Issue: 11207
io/http_client_timeout_test: Crash # Issue: 11207
io/http_close_test: Crash # Issue: 11207
io/http_compression_test: Crash # Issue: 11207
io/http_connection_close_test: Crash # Issue: 11207
io/http_connection_header_test: Crash # Issue: 11207
io/http_connection_info_test: Crash # Issue: 11207
io/http_content_length_test: Crash # Issue: 11207
io/http_cookie_test: Crash # Issue: 11207
io/http_detach_socket_test: Crash # Issue: 11207
io/http_headers_state_test: Crash # Issue: 11207
io/http_head_test: Crash # Issue: 11207
io/http_keep_alive_test: Crash # Issue: 11207
io/http_multipart_test: Crash # Issue: 11207
io/http_parser_test: Pass, Crash # Issue 11207
io/http_proxy_test: Crash # Issue: 11207
io/http_read_test: Crash # Issue: 11207
io/http_redirect_test: Crash # Issue: 11207
io/http_request_pipeling_test: Crash # Issue: 11207
io/https_client_certificate_test: Crash # Issue: 11207
io/http_server_early_client_close2_test: Crash # Issue: 11207
io/http_server_early_client_close_test: Crash # Issue: 11207
io/http_server_early_server_close_test: Crash # Issue: 11207
io/http_server_response_test: Crash # Issue: 11207
io/http_server_test: Crash # Issue: 11207
io/http_session_test: Crash # Issue: 11207
io/http_shutdown_test: Crash # Issue: 11207
io/https_server_test: Crash # Issue: 11207
io/http_stream_close_test: Crash # Issue: 11207
io/link_async_test: Crash # Issue: 11207
io/link_test: Pass, Crash # Issue: 11207
io/mime_multipart_parser_test: Pass, Crash # Issue 11207
io/pipe_server_test: Crash # Issue: 11207
io/process_broken_pipe_test: Pass, Crash # Issue: 11207
io/process_check_arguments_test: Pass, Crash # Issue: 11207
io/process_environment_test: Crash # Issue: 11207
io/process_exit_test: Crash # Issue: 11207
io/process_invalid_arguments_test: Crash # Issue: 11207
io/process_kill_test: Pass, Crash # Issue: 11207
io/process_non_ascii_test: Pass, Crash # Issue: 11207
io/process_path_environment_test: Crash # Issue: 11207
io/process_path_test: Crash # Issue: 11207
io/process_pid_test: Pass, Crash # Issue: 11207
io/process_run_output_test: Pass, Crash # Issue: 11207
io/process_segfault_test: Crash # Issue: 11207
io/process_set_exit_code_test: Crash # Issue: 11207
io/process_shell_test: Pass, Crash # Issue: 11207
io/process_stderr_test: Pass, Crash # Issue: 11207
io/process_stdin_transform_unsubscribe_test: Crash # Issue: 11207
io/process_stdout_test: Pass, Crash # Issue: 11207
io/process_working_directory_test: Crash # Issue: 11207
io/raw_secure_server_closing_test: Crash # Issue: 11207
io/raw_secure_server_socket_test: Crash # Issue: 11207
io/raw_secure_socket_pause_test: Crash # Issue: 11207
io/raw_secure_socket_test: Crash # Issue: 11207
io/raw_socket_test: Crash # Issue: 11207
io/raw_socket_typed_data_test: Pass, Crash # Issue: 11207
io/raw_socket_write_destroy_test: Pass, Crash # Issue: 11207
io/regress_10026_test: Crash # Issue: 11207
io/regress_7191_test: Crash # Issue: 11207
io/regress_8828_test: Crash # Issue: 11207
io/regress_9194_test: Crash # Issue: 11207
io/secure_builtin_roots_database_test: Crash # Issue: 11207
io/secure_builtin_roots_test: Crash # Issue: 11207
io/secure_client_raw_server_test: Crash, Timeout # Issue: 11207
io/secure_client_server_test: Timeout, Crash # Issue: 11207
io/secure_multiple_client_server_test: Crash # Issue: 11207
io/secure_no_builtin_roots_database_test: Crash # Issue: 11207
io/secure_no_builtin_roots_test: Crash # Issue: 11207
io/secure_server_client_certificate_test: Crash # Issue: 11207
io/secure_server_closing_test: Crash # Issue: 11207
io/secure_server_socket_test: Crash # Issue: 11207
io/secure_session_resume_test: Crash # Issue: 11207
io/secure_socket_bad_certificate_test: Pass, Crash # Issue: 11207
io/secure_socket_test: Crash # Issue: 11207
io/socket_close_test: Crash # Issue: 11207
io/socket_exception_test: Crash, Timeout # Issue: 11207
io/socket_info_test: Pass, Crash # Issue: 11207
io/socket_invalid_arguments_test: Crash # Issue: 11207
io/socket_ipv6_test: Pass, Crash # Issue: 11207
io/socket_port_test: Pass, Crash # Issue: 11207
io/socket_test: Crash # Issue: 11207
io/socket_upgrade_to_secure_test: Crash # Issue: 11207
io/status_file_parser_test: Crash # Issue: 11207
io/stdout_stderr_test: Pass, Crash # Issue: 11207
io/stream_pipe_test: Crash # Issue: 11207
io/test_extension_fail_test: Crash # Issue: 11207
io/test_extension_test: Crash # Issue: 11207
io/web_socket_protocol_processor_test: Crash # Issue: 11207
io/web_socket_test: Crash # Issue: 11207
io/web_socket_typed_data_test: Pass, Crash # Issue: 11207
left_shift_bit_and_op_test: Fail # Issue: 11207
package/package_isolate_test: Pass, Crash # Issue: 11207
typed_data_test: Crash # Issue: 11207
io/regress_7679_test: Pass, Crash

[ $arch == mips ]
*: Skip

[ $arch == simmips ]
*: Skip
